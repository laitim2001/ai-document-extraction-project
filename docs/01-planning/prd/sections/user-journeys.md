# User Journeys

## Journey 1: Amy Chen（數據處理專員）

**角色背景：**
- 職責：每日處理 150-200 張 Freight Invoice
- 痛點：重複性的手動數據錄入工作，容易疲勞出錯
- 目標：從低價值工作解放，專注於例外處理和品質把關

**主要旅程：日常發票處理**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 登入 | 使用 Azure AD SSO 登入 | 顯示待處理發票列表 | < 3 秒載入 |
| 2. 查看待處理 | 瀏覽今日待處理發票 | 顯示發票數量、來源、優先級 | 清晰的任務總覽 |
| 3. 處理高信心度 | 快速掃視自動處理結果 | 信心度 >90% 的發票已自動完成 | 無需人工介入 |
| 4. 審核中等信心度 | 確認 70-90% 信心度的提取結果 | 高亮顯示需確認的欄位 | 一鍵確認或修正 |
| 5. 處理低信心度 | 完整審核 <70% 信心度的發票 | 顯示原始文件與提取結果對照 | 方便比對修正 |
| 6. 提交結果 | 確認處理完成 | 更新狀態，觸發後續流程 | 即時反饋 |

**次要旅程：修正與學習反饋**

| 階段 | 用戶行為 | 系統響應 |
|------|---------|---------|
| 1. 發現錯誤 | 在審核中發現提取錯誤 | 提供修正界面 |
| 2. 修正數據 | 輸入正確值 | 記錄修正內容 |
| 3. 標記規則 | 標注是否為常見錯誤 | 納入學習庫（3 次確認升級） |

---

## Journey 2: David Wong（SCM 經理）

**角色背景：**
- 職責：管理供應鏈成本，進行供應商議價
- 痛點：缺乏完整的費用明細數據做分析
- 目標：獲取可信賴的數據支持決策

**主要旅程：費用分析與供應商比較**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 登入 | Azure AD SSO | 顯示管理者儀表板 | 權限正確 |
| 2. 查看總覽 | 瀏覽處理統計和自動化率 | 顯示 KPI 儀表板 | 即時數據 |
| 3. 匯出報表 | 選擇時間範圍和維度 | 生成費用明細報表 | 完整明細 |
| 4. 下載數據 | 導出 Excel | 提供格式化的數據文件 | 欄位完整 |
| 5. 進行分析 | 在 Excel 中做供應商比較 | N/A（系統外操作） | 數據可用 |

**次要旅程：審計支援**

| 階段 | 用戶行為 | 系統響應 |
|------|---------|---------|
| 1. 收到審計需求 | 需要特定期間的發票記錄 | - |
| 2. 查詢歷史 | 輸入查詢條件 | 顯示符合條件的記錄 |
| 3. 追溯原始 | 點擊記錄查看詳情 | 連結至原始發票文件 |
| 4. 匯出審計報告 | 選擇報告格式 | 生成符合審計要求的報告 |

---

## Journey 3: Kevin Lam（Super User）

**角色背景：**
- 職責：支援本地團隊，處理複雜案例
- 痛點：需要處理 Amy 無法解決的例外情況
- 目標：高效處理例外，改善系統規則

**主要旅程：例外處理與規則優化**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 接收升級案例 | 收到 Amy 升級的發票 | 顯示問題描述和處理歷史 | 完整上下文 |
| 2. 分析問題 | 查看原始文件和提取結果 | 並排顯示比對界面 | 清晰對照 |
| 3. 判斷原因 | 識別是格式問題或規則問題 | 提供診斷工具 | 快速定位 |
| 4. 修正數據 | 輸入正確值 | 記錄修正 | 即時生效 |
| 5. 建議規則 | 提出新規則建議 | 記錄到待審核規則庫 | 持續改善 |

**次要旅程：Forwarder Profile 維護**

| 階段 | 用戶行為 | 系統響應 |
|------|---------|---------|
| 1. 發現新格式 | 某 Forwarder 使用新的發票格式 | - |
| 2. 檢視 Profile | 查看現有 Forwarder Profile | 顯示目前的映射規則 |
| 3. 更新規則 | 調整或新增映射規則 | 保存並標記為待驗證 |
| 4. 測試規則 | 使用測試發票驗證 | 顯示測試結果 |

---

## Journey 4: Tony（系統管理員）

**角色背景：**
- 職責：維護系統運作，管理用戶權限
- 痛點：需要監控系統健康，快速響應問題
- 目標：確保系統穩定運行，99.5% uptime

**主要旅程：系統監控與維護**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 查看系統狀態 | 登入管理後台 | 顯示系統健康儀表板 | 即時狀態 |
| 2. 監控 Azure 服務 | 檢查 AI 服務狀態 | 顯示 API 調用量和響應時間 | 異常告警 |
| 3. 管理用戶 | 新增/修改用戶權限 | Azure AD 整合的權限管理 | 即時生效 |
| 4. 查看日誌 | 檢視系統日誌和錯誤 | 結構化的日誌查詢界面 | 快速定位 |
| 5. 處理告警 | 響應系統告警 | 提供問題診斷信息 | 快速恢復 |

**次要旅程：問題排查**

| 階段 | 用戶行為 | 系統響應 |
|------|---------|---------|
| 1. 收到問題報告 | 用戶反映系統問題 | - |
| 2. 查詢日誌 | 搜索相關時段的日誌 | 顯示詳細日誌記錄 |
| 3. 追蹤請求 | 追蹤特定發票的處理流程 | 顯示完整處理鏈 |
| 4. 識別問題 | 分析錯誤原因 | 提供診斷建議 |
| 5. 修復或升級 | 執行修復或升級至開發團隊 | 記錄處理結果 |

---

## Journey 5: Eric（n8n 工作流管理員）

**角色背景：**
- 職責：在 n8n 平台上建立和管理自動化工作流
- 工作環境：n8n 自架服務器
- 目標：設計高效的文件處理流程，確保工作流穩定運行

**主要旅程：工作流監控與觸發（在本系統內）**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 查看工作流狀態 | 登入本系統查看 n8n 連接狀態 | 顯示工作流健康狀態 | 即時同步 |
| 2. 監控執行記錄 | 查看最近的工作流執行結果 | 顯示成功/失敗統計 | 清晰可見 |
| 3. 手動觸發 | 需要時手動觸發特定工作流 | 發送觸發請求到 n8n | 即時響應 |
| 4. 查看錯誤 | 檢視工作流執行錯誤 | 顯示錯誤詳情和上下文 | 快速診斷 |
| 5. 追蹤文件狀態 | 追蹤特定文件的處理進度 | 顯示工作流執行階段 | 完整追蹤 |

**次要旅程：工作流設計與管理（在 n8n 平台）**

| 階段 | 用戶行為 | 系統響應 |
|------|---------|---------|
| 1. 設計工作流 | 在 n8n 中設計新的處理流程 | n8n 可視化編輯器 |
| 2. 配置節點 | 配置與本系統的 API 連接 | 提供 API 文檔和範例 |
| 3. 測試工作流 | 使用測試數據驗證 | 返回測試結果 |
| 4. 部署上線 | 啟用工作流 | 確認連接正常 |

**與本系統的整合點：**
- API 端點：供 n8n 調用的文件處理 API
- Webhook：接收 n8n 的回調通知
- 狀態同步：工作流執行狀態的雙向同步
- 告警整合：n8n 錯誤同步到本系統告警

---

## Journey 6: Michelle（財務人員）

**角色背景：**
- 職責：核對費用數據，處理付款審批
- 痛點：數據分散，核對工作繁瑣
- 目標：快速獲取準確的費用匯總

**主要旅程：費用核對與審批**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 登入 | Azure AD SSO | 顯示財務視圖 | 權限正確 |
| 2. 查看待核對 | 瀏覽待財務核對的記錄 | 顯示待核對列表 | 清晰分類 |
| 3. 核對明細 | 檢視費用明細與原始發票 | 並排顯示對照 | 方便核對 |
| 4. 標記結果 | 確認或標記異常 | 記錄核對結果 | 即時更新 |
| 5. 匯出報表 | 導出財務報表 | 生成標準格式報表 | 格式正確 |

---

## Journey 7: James（審計人員）

**角色背景：**
- 職責：進行內部/外部審計
- 痛點：需要追溯大量歷史記錄
- 目標：完整的審計軌跡和原始文件追溯

**主要旅程：審計追溯**

| 階段 | 用戶行為 | 系統響應 | 成功標準 |
|------|---------|---------|---------|
| 1. 登入 | Azure AD SSO（審計權限） | 顯示審計視圖 | 唯讀權限 |
| 2. 設定查詢 | 輸入審計期間和條件 | 接受查詢條件 | 靈活篩選 |
| 3. 查看結果 | 瀏覽符合條件的記錄 | 顯示完整記錄列表 | 無遺漏 |
| 4. 追溯詳情 | 點擊記錄查看完整歷史 | 顯示所有變更記錄 | 完整軌跡 |
| 5. 查看原始文件 | 連結至原始發票 | 顯示原始 PDF/圖片 | 可追溯 |
| 6. 匯出審計報告 | 選擇報告格式 | 生成審計報告 | 符合規範 |

---

## User Journey Requirements Summary

| 用戶角色 | 主要需求 | 關鍵界面 | 權限等級 |
|---------|---------|---------|---------|
| Amy（數據處理） | 高效處理發票、一鍵確認 | 處理隊列、審核界面 | 基本用戶 |
| David（SCM 經理） | 費用分析、報表匯出 | 儀表板、報表中心 | 管理者 |
| Kevin（Super User） | 例外處理、規則優化 | 診斷工具、規則管理 | 進階用戶 |
| Tony（系統管理員） | 系統監控、用戶管理 | 管理後台、日誌查詢 | 管理員 |
| Eric（n8n 管理員） | 工作流監控、API 整合 | 工作流狀態、API 文檔 | 整合用戶 |
| Michelle（財務） | 費用核對、報表匯出 | 財務視圖、核對界面 | 財務用戶 |
| James（審計） | 審計追溯、完整歷史 | 審計視圖、追溯工具 | 審計用戶（唯讀） |

---
